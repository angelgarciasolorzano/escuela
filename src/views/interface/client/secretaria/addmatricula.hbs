<div id="toast-notificacion"></div>
<div class="container p-3 border-secondary contenedor-alerta">
  <div class="card border-secondary shadow p-3 mb-5 bg-body-tertiary rounded">
    <div class="card-header color-background">
      <h1 class="text-center text-white fw-semibold">Matricula Año Lectivo {{anioActual}}</h1>
    </div>
    <!-- tab reingreso - Nuevo ingreso -->
    <ul class="nav nav-tabs pt-2 justify-content-center" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="reingreso-tab" data-bs-toggle="tab" data-bs-target="#reingreso-tab-pane"
          type="button" role="tab" aria-controls="reingreso-tab-pane" aria-selected="true">REINGRESO</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="nuevoIngreso-tab" data-bs-toggle="tab" data-bs-target="#nuevoIngreso-tab-pane"
          type="button" role="tab" aria-controls="nuevoIngreso-tab-pane" aria-selected="false">NUEVO INGRESO</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="historial-tab" data-bs-toggle="tab" data-bs-target="#historial-tab-pane"
          type="button" role="tab" aria-controls="historial-tab-pane" aria-selected="false">HISTORIAL</button>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="reingreso-tab-pane" role="tabpanel" aria-labelledby="reingreso-tab"
        tabindex="0">
        <div class="card-body">
          <div class="d-flex flex-row justify-content-evenly align-items-center">
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" id="btn_buscarEstudiantes"
              data-bs-target="#estudianteModal">Buscar Estudiante</button>
          </div>
          <!-- Form reingreso -->
          <div id="form-matricula" class="row g-3 py-3" novalidate>
            <div class="container w-100 pt-3">
              <div id="alert-reingreso"></div>
            </div>
            <div class="col-md-6">
              <label for="inputText" class="form-label">Estudiante:</label>
              <input name="name-estudiante" type="text" class="form-control border-secondary" id="name-estudiante"
                placeholder="Nombre del Estudiante" disabled>
            </div>
            <div class="col-md-6">
              <label for="inputText" class="form-label">Tutor:</label>
              <input name="name-tutor" type="text" class="form-control border-secondary" id="name-tutor"
                placeholder="Nombre del Tutor" disabled>
            </div>
            <div class="col-md-6">
              <label for="inputAddress" class="form-label">Dirección:</label>
              <input name="direccion" type="text" class="form-control border-secondary" id="direccion"
                placeholder="casa 123, barrio" disabled>
            </div>
            <div class="col-md-6">
              <label for="inputText" class="form-label">Secretari@:</label>
              <input name="correo_usuario" type="text-user" class="form-control border-secondary" id="correo_usuario"
                placeholder="Nombre del Secretari@" value={{user.correo_e}} disabled>
            </div>
            <div class="col-md-3 position-relative">
              <label for="inputState" class="form-label">Modalidad:</label>
              <select class="form-select border-secondary" name="modalidad" id="modalidad-reingreso" required disabled>
                <option selected disabled value="">Elegir...</option>
                {{#if modalidad}}
                {{#each modalidad}}
                <option value={{this.id_modalidad}}>{{this.nombre}}</option>
                {{/each}}
                {{/if}}
              </select>
              <div class="invalid-tooltip">
                ¡Error! Falta Seleccionar
              </div>
            </div>
            <div class="col-md-3 position-relative">
              <label for="inputState" class="form-label">Nivel/Grado Actual:</label>
              <select class="form-select border-secondary" name="nivel" id="nivel-reingreso" required disabled>
                <option selected disabled value="">Elegir...</option>
              </select>
              <div class="invalid-tooltip">
                ¡Error! Falta Seleccionar
              </div>
            </div>
            <div class="col-md-3 position-relative">
              <label for="inputState" class="form-label">Grupos Disponibles:</label>
              <select class="form-select border-secondary" name="grupo" id="grupo-reingreso" required disabled>
                <option selected disabled value="">Elegir...</option>
              </select>
              <div class="invalid-tooltip">
                ¡Error! Falta Seleccionar
              </div>
            </div>
            <div class="col-md-3 position-relative">
              <label for="inputText" class="form-label">Turno:</label>
              <input name="turno_reingreso" type="text" value="" class="form-control border-secondary" id="turno-reingreso" placeholder="" disabled>
              <div class="invalid-tooltip">
                ¡Error!
              </div>
            </div>
            <div class="text-center pt-3">
              <button class="btn btn-success btn-block" id="btn-matricula_reingreso">Matricular</button>
            </div>
          </div>
        </div>
      </div>
      <!-- form Nuevo Ingreso-->
      <div class="tab-pane fade" id="nuevoIngreso-tab-pane" role="tabpanel" aria-labelledby="nuevoIngreso-tab"
        tabindex="0">
        <div class="container pt-3">
          <div class="row">
            <div class="container w-100 pt-3">
              <div id="alert-nuevoingreso"></div>
            </div>
            <!--Checkbox para habilitar buscar tutor-->
            <div class="container text-center">
              <div class="row">
                <div class="col">
                  <div class="d-flex flex-row justify-content-center align-items-center">
                    <div class="form-check p-2 text-center">
                      <input class="form-check-input" type="checkbox" value="" id="checkTutor">
                      <label class="form-check-label" for="checkTutor">
                        ¿Necesita buscar el tutor?
                      </label>
                    </div>
                    <div class="p-2">
                      <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" id="btn-buscarTutor"
                        data-bs-target="#tutorModal" disabled>Buscar Tutor</button>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="d-flex flex-row justify-content-center align-items-center">
                    <div class="p-2">
                      <label for="inputText" class="col-form-label">Secretari@:</label>
                    </div>
                    <div class="p-1">
                      <input type="text" id="correo_usuario" class="form-control" aria-describedby="textHelpInline"
                        value={{user.correo_e}} disabled>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="container text-white p-2">
            <div id="formulario-matricula">
              <div class="row">

                <!--Datos del Tutor-->
                <div class="col">
                  <div class="card border-secondary">
                    <div class="card-header color-background">
                      <h1 class="text-center fs-3 text-white">Datos Tutor:</h1>
                    </div>
                    <div class="card-body">
                      <div class="row g-3" id="form-tutor">
                        <div class="col-md-6 position-relative">
                          <label for="inputText" class="form-label">Nombres:</label>
                          <input name="nombres_tutor" type="text" class="form-control border border-secondary"
                            id="nombres-tutor" placeholder="Juan Pablo" required>
                          <div class="invalid-tooltip">
                            Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputText" class="form-label">Apellidos:</label>
                          <input name="apellidos_tutor" type="text" class="form-control border-secondary"
                            id="apellidos-tutor" placeholder="Zamora Ulises" required>
                          <div class="invalid-tooltip">
                            Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputText" class="form-label">Cédula:</label>
                          <input name="cedula_tutor" type="text" class="form-control border-secondary" id="cedula-tutor"
                            placeholder="000-011280-0000B" required>
                          <div class="invalid-tooltip">
                            Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputAddress" class="form-label">Correo-e:</label>
                          <input name="correo_e_tutor" type="text" class="form-control border-secondary"
                            id="correo-tutor" placeholder="juan_pablo12@gmail.com" required>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputState" class="form-label">Género:</label>
                          <select name="sexo_tutor" id="sexo-tutor" class="form-select border border-secondary">
                            <option selected disabled value="">Elegir...</option>
                            <option value="M">Masculino</option>
                            <option value="F">Femenino</option>
                          </select>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputNumber" class="form-label">Teléfono:</label>
                          <input name="telefono_tutor" type="text" class="form-control border-secondary"
                            id="telefono-tutor" placeholder="84125477" required>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-12 position-relative">
                          <label for="inputText" class="form-label">Dirección:</label>
                          <input name="direccion_tutor" type="text" class="form-control border-secondary"
                            id="direccion-tutor" placeholder="municipio, distrito-barrio, casa#" required>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!--Datos del Estudiante-->
                <div class="col">
                  <div class="card border-secondary">
                    <div class="card-header color-background">
                      <h1 class="text-center fs-3 text-white">Datos Estudiante:</h1>
                    </div>
                    <div class="card-body">
                      <div class="row g-3" id="form-estudiante">
                        <div class="col-md-6 position-relative">
                          <label for="inputText" class="form-label">Nombres:</label>
                          <input name="nombres_est" type="text" class="form-control border-secondary" id="nombres-est"
                            placeholder="Jennifer Sofia">
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputText" class="form-label">Apellidos:</label>
                          <input name="apellidos_est" type="text" class="form-control border-secondary"
                            id="apellidos-est" placeholder="Fernandez Ortiz">
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputText" class="form-label">#Registro de Nacimiento:</label>
                          <input name="registroNac_est" type="text" class="form-control border-secondary"
                            id="registroNac-est" placeholder="#Tomo-#Folio-#Partida">
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputDate" class="form-label">Fecha de Nacimiento:</label>
                          <input name="fechaNac_est" type="date" class="form-control border-secondary" id="fecha-est">
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputState" class="form-label">Género:</label>
                          <select class="form-select border-secondary" name="sexo_est" id="sexo-est">
                            <option selected disabled value="">Elegir...</option>
                            <option value="M">Masculino</option>
                            <option value="F">Femenino</option>
                          </select>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-6 position-relative">
                          <label for="inputState" class="form-label">Modalidad:</label>
                          <select class="form-select border-secondary" name="modalidad_est" id="modalidad-est">
                            <option selected disabled value="">Elegir...</option>
                            {{#if modalidad}}
                            {{#each modalidad}}
                            <option value={{this.id_modalidad}}>{{this.nombre}}</option>
                            {{/each}}
                            {{/if}}
                          </select>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-4 position-relative">
                          <label for="inputState" class="form-label">Nivel/Grado Actual:</label>
                          <select class="form-select border-secondary" name="nivel_est" id="nivel-est" disabled>
                            <option selected disabled value="">Elegir...</option>
                          </select>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-4 position-relative">
                          <label for="inputState" class="form-label">Grupos Disponibles:</label>
                          <select class="form-select border-secondary" name="grupo_nuevoIngreso" id="grupo-nuevoIngreso"
                            disabled>
                            <option selected disabled value="">Elegir...</option>
                          </select>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                        <div class="col-md-4 position-relative">
                          <label for="inputText" class="form-label">Turno:</label>
                          <input name="turno_nuevoIngreso" type="text" class="form-control border-secondary"
                            value="" id="turno-nuevoIngreso" placeholder="" disabled>
                          <div class="invalid-tooltip">
                            ¡Error!
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!--Papeleo a Entregar-->
              <div class="container text-center pt-3 text-black">
                <div class="form-check text-black form-check-inline">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="Partida de Nacimiento">
                  <label class="form-check-label" for="inlineCheckbox1">Partida de Nacimiento</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                    value="Copia de cedula del Tutor">
                  <label class="form-check-label" for="inlineCheckbox2">Copia de Cedula del Tutor</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="Copia del boletin">
                  <label class="form-check-label" for="inlineCheckbox3">Copia del Boletin</label>
                </div>
                <div id="mensaje-error" class="invalid-feedback">Debe seleccionar al menos un documento</div>
              </div>

              <!--Enviar datos al Servidor-->
              <div class="text-center py-3">
                <button class="btn btn-success btn-block" id="btn-matriculaNuevo">Matricular</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--Historial de matriculas-->
      <div class="tab-pane fade" id="historial-tab-pane" role="tabpanel" aria-labelledby="historial-tab" tabindex="0">
        <div class="container pt-3">
          <div class="row">
            <div class="container w-100 pt-3">
              <div id="alert-historial"></div>
            </div>
            <h1 class="fs-3" style="color:#2069A1;">Matriculas recientes:</h1>
            <div class="table-responsive">
              <table class="table table-striped table-bordered nowrap" id="dt-matricula" style="width: 100%;">
                <thead class="table-dark">
                  <tr>
                    <th class="text-center">Id</th>
                    <th>Nombres</th>
                    <th>Apellidos</th>
                    <th class="text-center">Grado/Nivel</th>
                    <th class="text-center">Grupo</th>
                    <th class="text-center">Fecha</th>
                    <th class="text-center">Acciones</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Modal Estudiante -->
<div class="modal fade" id="estudianteModal" tabindex="-1" aria-labelledby="estudianteLabel" aria-hidden="true"
  role="document">
  <div class="modal-dialog modal-fullscreen-xl modal-dialog-centered modal-xl">
    <div class="modal-content">
      <div class="modal-header color-background">
        <h5 class="modal-title text-white" id="estudianteLabel">Estudiantes Activos:</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container container-fluid">
          <div class="row">
            <div class="col-xl">
              <div class="table-responsive">
                <table class="table table-striped table-bordered nowrap" id="dt_estudiante" style="width: 100%;">
                  <thead class="table-dark">
                    <tr>
                      <th class="text-center">Id</th>
                      <th>Nombres</th>
                      <th>Apellidos</th>
                      <th>Estado</th>
                      <th class="text-center">Tutor</th>
                      <th class="text-center">Cedula Tutor</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button id="btn-aceptar-est" type="submit" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal Tutor-->
<div class="modal fade" id="tutorModal" tabindex="-1" aria-labelledby="tutorLabel" aria-hidden="true" role="document">
  <div class="modal-dialog modal-fullscreen-lg modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header color-background">
        <h5 class="modal-title text-white" id="tutorLabel">Tutores Disponibles:</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container container-fluid">
          <div class="row">
            <div class="col-lg">
              <div class="table-responsive">
                <table class="table table-striped table-bordered nowrap" id="dt_tutor" style="width: 100%;">
                  <thead class="table-dark">
                    <tr>
                      <th class="text-center">Id</th>
                      <th>Nombres</th>
                      <th>Apellidos</th>
                      <th class="text-center">Cedula</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button id="btn-aceptar-tutor" type="submit" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal Tutor-->
<!-- Modal para modificar la matricula del estudiante-->
<div class="modal fade" id="editMatriculaModal" tabindex="-1" aria-labelledby="editMatriculaLabel" aria-hidden="true"
  role="document">
  <div class="modal-dialog modal-fullscreen-lg modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header color-background">
        <h5 class="modal-title text-white" id="editMatriculaLabel">Editar Matricula:</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container container-fluid">
          <div class="row">
            <div class="col-md">
              <div class="row g-3" id="form-editar-matricula">
                <div class="col-md-12 position-relative">
                  <label for="inputText" class="form-label">Estudiante:</label>
                  <input name="nombre_est" type="text" class="form-control border-secondary" id="nombre-est-edit" disabled>
                </div>
                <div class="col-md-4 position-relative">
                  <label for="inputText" class="form-label">#Registro de Nacimiento:</label>
                  <input name="registroNac_est_edit" type="text" class="form-control border-secondary" id="registroNac-est-edit" disabled>
                </div>
                <div class="col-md-4 position-relative">
                  <label for="inputDate" class="form-label">Fecha de Nacimiento:</label>
                  <input name="fechaNac_est_edit" type="date" class="form-control border-secondary" id="fechaNac-est-edit"disabled>
                </div>
                <div class="col-md-4 position-relative">
                  <label for="inputText" class="form-label">Género:</label>
                  <input class="form-control border-secondary"type="text" name="sexo_est_edit" id="sexo-est-edit"
                  disabled>
                </div>
                <div class="col-md-12 position-relative">
                  <label for="inputText" class="form-label">Nivel/Grado Actual:</label>
                  <input name="grupoactual_est_edit" type="text" class="form-control border-secondary" id="grupoactual-est-edit" disabled>
                </div>
                <div class="col-md-3 position-relative">
                  <label for="inputState" class="form-label">Modalidad:</label>
                  <select class="form-select border-secondary" name="modalidad_est" id="modalidad-est-edit" required>
                    <option selected disabled value="">Elegir...</option>
                    {{#if modalidad}}
                    {{#each modalidad}}
                    <option value={{this.id_modalidad}}>{{this.nombre}}</option>
                    {{/each}}
                    {{/if}}
                  </select>
                  <div class="invalid-tooltip">
                    ¡Debe seleccionar!
                  </div>
                </div>
                <div class="col-md-3 position-relative">
                  <label for="inputState" class="form-label">Nivel/Grado Actual:</label>
                  <select class="form-select border-secondary" name="nivel-est-edit" id="nivel-est-edit" required disabled>
                    <option selected disabled value="">Elegir...</option>
                  </select>
                  <div class="invalid-tooltip">
                    ¡Debe seleccionar!
                  </div>
                </div>
                <div class="col-md-3 position-relative">
                  <label for="inputState" class="form-label">Grupos Disponibles:</label>
                  <select class="form-select border-secondary" name="grupo-est-edit" id="grupo-est-edit"
                    required disabled>
                    <option selected disabled value="">Elegir...</option>
                  </select>
                  <div class="invalid-tooltip">
                    ¡Debe seleccionar!
                  </div>
                </div>
                <div class="col-md-3 position-relative">
                  <label for="inputText" class="form-label">Turno:</label>
                  <input name="turno_nuevoIngreso" value="Matutino" type="text" class="form-control border-secondary"
                    id="turno-nuevoIngreso" placeholder="" disabled>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
        <button id="btn-modificar-matricula" class="btn btn-warning">Guardar</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal para modificar la matricula del estudiante-->
<!-- modal-message -->
<div id="crearModal"></div>
<!-- modal-message -->
<script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.0.8/r-3.0.2/sl-2.0.3/datatables.min.js"></script>
<script src="/event/secretaria/matricula.js"></script>